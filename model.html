<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–∏–ª—å –º–æ–¥–µ–ª–∏</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        
        body {
            background: #f5f5f5;
            color: #333;
        }
        
        /* –•–µ–¥–µ—Ä */
        .header {
            background: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .back-btn {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        .model-profile {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        /* –ì–∞–ª–µ—Ä–µ—è */
        .gallery-container {
            position: relative;
        }
        
        .main-photo {
            width: 100%;
            height: 500px;
            object-fit: cover;
            background: linear-gradient(45deg, #f5f5f5, #e0e0e0);
        }
        
        .photo-counter {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .thumbnails {
            display: flex;
            padding: 15px;
            gap: 10px;
            overflow-x: auto;
            background: #fafafa;
        }
        
        .thumbnail {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
            flex-shrink: 0;
        }
        
        .thumbnail:hover,
        .thumbnail.active {
            border-color: #007bff;
            transform: scale(1.05);
        }
        
        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏ */
        .model-info {
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 768px) {
            .model-info {
                grid-template-columns: 1fr;
            }
        }
        
        .info-section h2 {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #007bff;
            color: #333;
        }
        
        .info-item {
            margin-bottom: 15px;
            display: flex;
        }
        
        .info-label {
            font-weight: bold;
            min-width: 140px;
            color: #666;
        }
        
        .info-value {
            color: #333;
        }
        
        .bio {
            line-height: 1.6;
            white-space: pre-line;
        }
        
        /* –ó–∞–≥—Ä—É–∑—á–∏–∫ */
        .loader {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 80vh;
            flex-direction: column;
            gap: 20px;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* –û—à–∏–±–∫–∞ */
        .error {
            background: #ffebee;
            color: #c62828;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            margin: 50px auto;
            max-width: 600px;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ */
        .status-available {
            display: inline-block;
            padding: 5px 15px;
            background: #4caf50;
            color: white;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .status-unavailable {
            display: inline-block;
            padding: 5px 15px;
            background: #f44336;
            color: white;
            border-radius: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- –•–µ–¥–µ—Ä -->
    <div class="header">
        <div class="header-content">
            <a href="/models-portfolio/" class="back-btn">‚Üê –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–∞–ª–æ–≥—É</a>
            <h1 id="page-title">–ü—Ä–æ—Ñ–∏–ª—å –º–æ–¥–µ–ª–∏</h1>
        </div>
    </div>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container">
        <div id="loader" class="loader">
            <div class="spinner"></div>
            <div>–ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –º–æ–¥–µ–ª–∏...</div>
        </div>
        
        <div id="model-content" style="display: none;">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ JS -->
        </div>
        
        <div id="error-container" style="display: none;"></div>
    </div>

    <script>
        // –ü–æ–ª—É—á–∞–µ–º ID –º–æ–¥–µ–ª–∏ –∏–∑ URL
        function getModelIdFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('id') || null;
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
        async function loadModelProfile() {
    const modelId = getModelIdFromUrl();
    const loader = document.getElementById('loader');
    const content = document.getElementById('model-content');
    const errorContainer = document.getElementById('error-container');
    
    if (!modelId) {
        showError('ID –º–æ–¥–µ–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω –≤ URL. –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ URL: model.html?id=anna_ivanova');
        return;
    }
    
    try {
        // üöÄ –í–ê–ñ–ù–û: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π URL –∫ JSON —Ñ–∞–π–ª—É
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—É—Ç—å –∫ JSON –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–∞–π—Ç
        let jsonUrl;
        
        if (window.location.hostname.includes('github.io')) {
            // –ï—Å–ª–∏ –Ω–∞ GitHub Pages: https://username.github.io/repo-name/
            const pathParts = window.location.pathname.split('/');
            const repoName = pathParts[1]; // –ü–µ—Ä–≤–∞—è —á–∞—Å—Ç—å –ø–æ—Å–ª–µ –¥–æ–º–µ–Ω–∞
            const username = window.location.hostname.split('.')[0];
            jsonUrl = `https://raw.githubusercontent.com/${username}/${repoName}/main/data/models.json`;
        } else if (window.location.protocol === 'file:') {
            // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ –∫–∞–∫ —Ñ–∞–π–ª
            jsonUrl = 'data/models.json';
        } else {
            // –î–ª—è –ª—é–±–æ–≥–æ –¥—Ä—É–≥–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞
            jsonUrl = '../data/models.json';
        }
        
        console.log('–ó–∞–≥—Ä—É–∂–∞—é JSON –ø–æ –∞–¥—Ä–µ—Å—É:', jsonUrl);
        
        const response = await fetch(jsonUrl);
        
        if (!response.ok) {
            throw new Error(`–û—à–∏–±–∫–∞ ${response.status}: –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ`);
        }
        
        const allModels = await response.json();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –º–∞—Å—Å–∏–≤
        if (!Array.isArray(allModels)) {
            throw new Error('–î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∞—Å—Å–∏–≤–æ–º –º–æ–¥–µ–ª–µ–π');
        }
        
        // –ò—â–µ–º –Ω—É–∂–Ω—É—é –º–æ–¥–µ–ª—å
        const model = allModels.find(m => m.id === modelId);
        
        if (!model) {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ ID –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
            const availableIds = allModels.map(m => m.id).join(', ');
            throw new Error(`–ú–æ–¥–µ–ª—å —Å ID "${modelId}" –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –î–æ—Å—Ç—É–ø–Ω—ã–µ ID: ${availableIds}`);
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.title = `${model.name} - –ü—Ä–æ—Ñ–∏–ª—å –º–æ–¥–µ–ª–∏`;
        document.getElementById('page-title').textContent = model.name;
        
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML –ø—Ä–æ—Ñ–∏–ª—è
        const profileHtml = generateProfileHtml(model);
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
        loader.style.display = 'none';
        content.innerHTML = profileHtml;
        content.style.display = 'block';
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≥–∞–ª–µ—Ä–µ—é
        initGallery(model.photos || []);
        
    } catch (error) {
        console.error('–ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ:', error);
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        try {
            const debugResponse = await fetch(jsonUrl);
            const allModels = await debugResponse.json();
            console.log('–í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏:', allModels.map(m => m.id));
            
            error.message += `\n\n–î–æ—Å—Ç—É–ø–Ω—ã–µ ID: ${allModels.map(m => m.id).join(', ')}`;
        } catch (debugError) {
            console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏');
        }
        
        loader.style.display = 'none';
        showError(error.message);
    }
}
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –ø—Ä–æ—Ñ–∏–ª—è
        function generateProfileHtml(model) {
            const photos = model.photos || [];
            const mainPhoto = photos.length > 0 ? photos[0] : '';
            
            return `
                <div class="model-profile">
                    <!-- –ì–∞–ª–µ—Ä–µ—è -->
                    <div class="gallery-container">
                        <img id="main-photo" src="${mainPhoto}" 
                             alt="${model.name}" 
                             class="main-photo"
                             onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1494790108755-2616b612b786?w=1200&h=500&fit=crop'">
                        
                        ${photos.length > 0 ? 
                            `<div class="photo-counter" id="photo-counter">1 / ${photos.length}</div>` : 
                            ''
                        }
                        
                        ${photos.length > 1 ? `
                            <div class="thumbnails" id="thumbnails">
                                ${photos.map((photo, index) => `
                                    <img src="${photo}" 
                                         alt="–§–æ—Ç–æ ${index + 1}" 
                                         class="thumbnail ${index === 0 ? 'active' : ''}"
                                         data-index="${index}"
                                         onclick="changePhoto(${index})"
                                         onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1494790108755-2616b612b786?w=80&h=80&fit=crop'">
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                    
                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div class="model-info">
                        <div class="info-section">
                            <h2>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                            
                            ${model.name ? `
                                <div class="info-item">
                                    <span class="info-label">–ò–º—è:</span>
                                    <span class="info-value">${model.name}</span>
                                </div>
                            ` : ''}
                            
                            ${model.height ? `
                                <div class="info-item">
                                    <span class="info-label">–†–æ—Å—Ç:</span>
                                    <span class="info-value">${model.height} —Å–º</span>
                                </div>
                            ` : ''}
                            
                            ${model.measurements ? `
                                <div class="info-item">
                                    <span class="info-label">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:</span>
                                    <span class="info-value">${model.measurements}</span>
                                </div>
                            ` : ''}
                            
                            ${model.city ? `
                                <div class="info-item">
                                    <span class="info-label">–ì–æ—Ä–æ–¥:</span>
                                    <span class="info-value">${model.city}</span>
                                </div>
                            ` : ''}
                            
                            ${model.category ? `
                                <div class="info-item">
                                    <span class="info-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</span>
                                    <span class="info-value">${model.category}</span>
                                </div>
                            ` : ''}
                            
                            ${model.is_available !== undefined ? `
                                <div class="info-item">
                                    <span class="info-label">–°—Ç–∞—Ç—É—Å:</span>
                                    <span class="info-value">
                                        <span class="${model.is_available ? 'status-available' : 'status-unavailable'}">
                                            ${model.is_available ? '–î–æ—Å—Ç—É–ø–Ω–∞' : '–ù–µ –¥–æ—Å—Ç—É–ø–Ω–∞'}
                                        </span>
                                    </span>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div class="info-section">
                            <h2>–û –º–æ–¥–µ–ª–∏</h2>
                            
                            ${model.bio ? `
                                <div class="info-item">
                                    <div class="bio">${model.bio}</div>
                                </div>
                            ` : '<p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω–∞</p>'}
                            
                            <div class="info-item">
                                <span class="info-label">ID:</span>
                                <span class="info-value"><code>${model.id}</code></span>
                            </div>
                            
                            ${photos.length > 0 ? `
                                <div class="info-item">
                                    <span class="info-label">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏:</span>
                                    <span class="info-value">${photos.length} —à—Ç.</span>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–∞–ª–µ—Ä–µ–∏
        function initGallery(photos) {
            if (photos.length <= 1) return;
            
            window.currentPhotoIndex = 0;
            window.photosArray = photos;
        }
        
        // –°–º–µ–Ω–∞ —Ñ–æ—Ç–æ –≤ –≥–∞–ª–µ—Ä–µ–µ
        function changePhoto(index) {
            const mainPhoto = document.getElementById('main-photo');
            const counter = document.getElementById('photo-counter');
            const thumbnails = document.querySelectorAll('.thumbnail');
            
            if (mainPhoto && window.photosArray && window.photosArray[index]) {
                mainPhoto.src = window.photosArray[index];
                window.currentPhotoIndex = index;
                
                if (counter) {
                    counter.textContent = `${index + 1} / ${window.photosArray.length}`;
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –º–∏–Ω–∏–∞—Ç—é—Ä—É
                thumbnails.forEach((thumb, i) => {
                    thumb.classList.toggle('active', i === index);
                });
            }
        }
        
        // –ü–æ–∫–∞–∑ –æ—à–∏–±–∫–∏
        function showError(message) {
            const errorContainer = document.getElementById('error-container');
            errorContainer.innerHTML = `
                <div class="error">
                    <h2>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h2>
                    <p>${message}</p>
                    <div style="margin-top: 20px;">
                        <a href="index.html" style="
                            display: inline-block;
                            padding: 10px 20px;
                            background: #007bff;
                            color: white;
                            text-decoration: none;
                            border-radius: 5px;
                            margin-right: 10px;
                        ">
                            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥
                        </a>
                        <button onclick="location.reload()" style="
                            padding: 10px 20px;
                            background: #f5f5f5;
                            border: 1px solid #ddd;
                            border-radius: 5px;
                            cursor: pointer;
                        ">
                            ‚ü≥ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å
                        </button>
                    </div>
                </div>
            `;
            errorContainer.style.display = 'block';
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', loadModelProfile);
        
        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ –≥–∞–ª–µ—Ä–µ–µ –∫–ª–∞–≤–∏—à–∞–º–∏
        document.addEventListener('keydown', (e) => {
            if (!window.photosArray || window.photosArray.length <= 1) return;
            
            if (e.key === 'ArrowLeft') {
                const newIndex = (window.currentPhotoIndex - 1 + window.photosArray.length) % window.photosArray.length;
                changePhoto(newIndex);
            } else if (e.key === 'ArrowRight') {
                const newIndex = (window.currentPhotoIndex + 1) % window.photosArray.length;
                changePhoto(newIndex);
            }
        });
    </script>
    <div style="
    position: fixed;
    bottom: 10px;
    right: 10px;
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 10px;
    border-radius: 5px;
    font-size: 12px;
    z-index: 1000;
    display: none;
" id="debug-info">
    <div>ID: <span id="debug-model-id">-</span></div>
    <div>–í—Å–µ–≥–æ –º–æ–¥–µ–ª–µ–π: <span id="debug-model-count">-</span></div>
    <div>URL JSON: <span id="debug-json-url">-</span></div>
</div>

<script>
// –î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ—É–Ω–∫—Ü–∏—é loadModelProfile() –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
console.log('–ù–∞–π–¥–µ–Ω—ã –º–æ–¥–µ–ª–∏:', allModels.map(m => m.id));

// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
document.getElementById('debug-model-id').textContent = modelId;
document.getElementById('debug-model-count').textContent = allModels.length;
document.getElementById('debug-json-url').textContent = jsonUrl;
document.getElementById('debug-info').style.display = 'block';
</script>
</body>
</html>
